import{d as V,j as $,p as S,q as I,c as o,a as p,b as n,h as M,w as i,e as t,m as l,k as x,o as r,l as y,g as c,i as N,s as U,v as A,F as b,r as w,t as a,n as B,x as T,y as D}from"./app-CvP1KPYH.js";import{_ as j}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-ChMCsAtk.js";import{_ as z}from"./index-CpVB37a4.js";import{_ as v}from"./AppLogo-B2SORwMu.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-D69UDcTp.js";import"./utils-DuFgZE5r.js";const E={class:"space-y-6 p-6"},H={class:"flex items-center justify-between"},L={class:"flex flex-wrap items-end gap-3"},J={class:"min-w-[200px] flex-1"},G={class:"min-w-[180px] flex-1"},O=["value"],Q={class:"flex gap-2"},W={key:0,class:"rounded-lg border-l-4 border-l-orange-500 bg-orange-50 p-4"},X={class:"text-sm text-orange-800"},Y={class:"font-semibold"},Z={class:"rounded-lg border bg-white"},ee={class:"overflow-x-auto"},te={class:"w-full"},se={class:"border-b bg-muted"},re={key:0,class:"px-6 py-3 text-right text-sm font-semibold"},oe={key:1,class:"px-6 py-3 text-right text-sm font-semibold"},ae={key:0},le=["colspan"],ne={class:"space-y-2"},ie={class:"max-w-xs truncate px-6 py-3 font-medium"},de={class:"px-6 py-3 text-sm text-muted-foreground"},ue={class:"px-6 py-3 text-sm"},me={class:"px-6 py-3 text-right"},ce={key:0,class:"px-6 py-3 text-right"},pe={class:"px-6 py-3 text-right font-semibold"},fe={key:1,class:"space-x-2 px-6 py-3 text-right"},ge={key:1,class:"flex items-center justify-between"},xe={class:"text-sm text-muted-foreground"},ve={class:"flex gap-1"},Ke=V({__name:"Index",props:{products:{},categories:{},filters:{}},setup(d){const m=$().props.auth.user.role==="admin",h=d,F=[{title:"Inventory",href:"#"},{title:"Produk",href:"/products"}],f=S(h.filters.search||""),g=S(h.filters.category_id||""),C=u=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(u),K=()=>{const u={};f.value&&(u.search=f.value),g.value&&(u.category_id=g.value),D.get("/products",u,{preserveState:!1})},_=()=>{f.value="",g.value="",D.get("/products",{},{preserveState:!1})},k=I(()=>f.value||g.value),P=u=>{if(!u)return"#";try{const e=new URL(u);return e.pathname+e.search}catch{return u}};return(u,e)=>(r(),o(b,null,[p(n(M),{title:"Produk"}),p(q,{breadcrumbs:F},{default:i(()=>[t("div",E,[t("div",H,[p(j,{title:"Daftar Produk",description:m?"Kelola semua produk":"Referensi produk"},null,8,["description"]),m?(r(),x(n(y),{key:0,href:"/products/create"},{default:i(()=>[p(n(v),{class:"bg-orange-500 hover:bg-orange-600"},{default:i(()=>[...e[2]||(e[2]=[c(" Tambah Produk ",-1)])]),_:1})]),_:1})):l("",!0)]),t("div",L,[t("div",J,[e[3]||(e[3]=t("label",{class:"text-sm font-medium"},"Cari Nama/SKU",-1)),N(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),onKeyup:U(K,["enter"]),type:"text",placeholder:"Ketik nama atau SKU...",class:"mt-2 w-full rounded-lg border border-input px-3 py-2 text-sm focus:border-orange-400 focus:ring-2 focus:ring-orange-200"},null,544),[[A,f.value]])]),t("div",G,[e[5]||(e[5]=t("label",{class:"text-sm font-medium"},"Kategori",-1)),N(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),class:"mt-2 w-full rounded-lg border border-input px-3 py-2 text-sm focus:border-orange-400 focus:ring-2 focus:ring-orange-200"},[e[4]||(e[4]=t("option",{value:""},"Semua Kategori",-1)),(r(!0),o(b,null,w(h.categories,s=>(r(),o("option",{key:s.id,value:s.id},a(s.name),9,O))),128))],512),[[B,g.value]])]),t("div",Q,[p(n(v),{onClick:K,class:"bg-orange-500 hover:bg-orange-600"},{default:i(()=>[...e[6]||(e[6]=[c(" Cari ",-1)])]),_:1}),k.value?(r(),x(n(v),{key:0,onClick:_,variant:"outline"},{default:i(()=>[...e[7]||(e[7]=[c(" Reset ",-1)])]),_:1})):l("",!0)])]),k.value?(r(),o("div",W,[t("p",X,[e[8]||(e[8]=c(" Ditemukan ",-1)),t("span",Y,a(d.products.total),1),e[9]||(e[9]=c(" produk dari pencarian Anda ",-1)),t("button",{onClick:_,class:"ml-2 text-orange-600 underline hover:text-orange-800"}," Reset filter ")])])):l("",!0),t("div",Z,[t("div",ee,[t("table",te,[t("thead",se,[t("tr",null,[e[10]||(e[10]=t("th",{class:"max-w-xs px-6 py-3 text-left text-sm font-semibold"}," Nama ",-1)),e[11]||(e[11]=t("th",{class:"px-6 py-3 text-left text-sm font-semibold"}," SKU ",-1)),e[12]||(e[12]=t("th",{class:"px-6 py-3 text-left text-sm font-semibold"}," Kategori ",-1)),e[13]||(e[13]=t("th",{class:"px-6 py-3 text-right text-sm font-semibold"}," Harga Jual ",-1)),m?(r(),o("th",re," Margin ")):l("",!0),e[14]||(e[14]=t("th",{class:"px-6 py-3 text-right text-sm font-semibold"}," Stok ",-1)),m?(r(),o("th",oe," Aksi ")):l("",!0)])]),t("tbody",null,[!d.products.data||d.products.data.length===0?(r(),o("tr",ae,[t("td",{colspan:m?7:6,class:"py-8 text-center text-muted-foreground"},[t("div",ne,[e[15]||(e[15]=t("p",null,"Tidak ada produk yang ditemukan",-1)),k.value?(r(),o("button",{key:0,onClick:_,class:"text-orange-600 underline hover:text-orange-800"}," Coba reset filter ")):l("",!0)])],8,le)])):l("",!0),(r(!0),o(b,null,w(d.products.data,s=>(r(),o("tr",{key:s.id,class:"border-b hover:bg-muted/50"},[t("td",ie,a(s.name),1),t("td",de,a(s.sku),1),t("td",ue,a(s.category.name),1),t("td",me,a(C(s.selling_price)),1),m?(r(),o("td",ce,[p(n(z),{variant:s.selling_price-s.purchase_price>0?"default":"destructive"},{default:i(()=>[c(a(C(s.selling_price-s.purchase_price))+" / "+a(Math.round((s.selling_price-s.purchase_price)/s.selling_price*100))+"% ",1)]),_:2},1032,["variant"])])):l("",!0),t("td",pe,a(s.stock_quantity)+" "+a(s.unit),1),m?(r(),o("td",fe,[m?(r(),x(n(y),{key:0,href:`/products/${s.id}/edit`},{default:i(()=>[p(n(v),{variant:"outline",size:"sm"},{default:i(()=>[...e[16]||(e[16]=[c(" Edit ",-1)])]),_:1})]),_:1},8,["href"])):l("",!0),m?(r(),x(n(y),{key:1,href:`/products/${s.id}`,method:"delete",as:"button"},{default:i(()=>[p(n(v),{variant:"destructive",size:"sm",type:"button"},{default:i(()=>[...e[17]||(e[17]=[c(" Hapus ",-1)])]),_:1})]),_:1},8,["href"])):l("",!0)])):l("",!0)]))),128))])])])]),d.products.last_page>1?(r(),o("div",ge,[t("p",xe," Menampilkan "+a(d.products.from)+" hingga "+a(d.products.to)+" dari "+a(d.products.total)+" produk ",1),t("div",ve,[(r(!0),o(b,null,w(d.products.links,(s,R)=>(r(),x(n(y),{key:R,href:P(s.url),"preserve-scroll":"",disabled:!s.url,class:T(["rounded-lg px-3 py-2 text-sm font-medium transition-colors",s.active?"bg-orange-500 text-white":s.url?"border hover:bg-muted":"cursor-not-allowed border text-muted-foreground opacity-50"])},{default:i(()=>[c(a(s.label.includes("Previous")?"<":s.label.includes("Next")?">":s.label.replace(/[^\d.]/g,"").trim()||"..."),1)]),_:2},1032,["href","disabled","class"]))),128))])])):l("",!0)])]),_:1})],64))}});export{Ke as default};
