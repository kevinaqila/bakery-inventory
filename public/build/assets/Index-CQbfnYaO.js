import{d as V,j as $,p as S,q as I,c as r,a as c,b as i,h as M,w as n,e as t,m as l,k as x,o,l as b,g as m,i as N,s as U,v as A,F as v,r as w,t as a,n as B,x as R,y as D}from"./app-DnYw0gYl.js";import{_ as T}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-CjiTzULo.js";import{_ as j}from"./index-ChOrF4TS.js";import{_ as y}from"./AppLogo-BfaObScc.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-rIED3CLO.js";import"./utils-8GNWza3W.js";const q={class:"space-y-6 p-6"},E={class:"flex items-center justify-between"},H={class:"flex flex-wrap items-end gap-3"},J={class:"min-w-[200px] flex-1"},L={class:"min-w-[180px] flex-1"},G=["value"],O={class:"flex gap-2"},Q={key:0,class:"rounded-lg border-l-4 border-l-orange-500 bg-orange-50 p-4"},W={class:"text-sm text-orange-800"},X={class:"font-semibold"},Y={class:"rounded-lg border bg-white"},Z={class:"overflow-x-auto"},ee={class:"w-full"},te={class:"border-b bg-muted"},se={key:0,class:"px-6 py-3 text-right text-sm font-semibold"},oe={key:1,class:"px-6 py-3 text-right text-sm font-semibold"},re={key:0},ae=["colspan"],le={class:"space-y-2"},ie={class:"max-w-xs truncate px-6 py-3 font-medium"},ne={class:"px-6 py-3 text-sm text-muted-foreground"},de={class:"px-6 py-3 text-sm"},ue={class:"px-6 py-3 text-right"},me={key:0,class:"px-6 py-3 text-right"},ce={class:"px-6 py-3 text-right font-semibold"},pe={key:1,class:"space-x-2 px-6 py-3 text-right"},fe={key:1,class:"flex items-center justify-between"},ge={class:"text-sm text-muted-foreground"},xe={class:"flex gap-1"},Ce=V({__name:"Index",props:{products:{},categories:{},filters:{}},setup(d){const u=$().props.auth.user.role==="admin",h=d,F=[{title:"Inventory",href:"#"},{title:"Produk",href:"/products"}],p=S(h.filters.search||""),f=S(h.filters.category_id||""),C=g=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(g),K=()=>{const g={};p.value&&(g.search=p.value),f.value&&(g.category_id=f.value),D.get("/products",g,{preserveState:!1})},_=()=>{p.value="",f.value="",D.get("/products",{},{preserveState:!1})},k=I(()=>p.value||f.value);return(g,e)=>(o(),r(v,null,[c(i(M),{title:"Produk"}),c(z,{breadcrumbs:F},{default:n(()=>[t("div",q,[t("div",E,[c(T,{title:"Daftar Produk",description:u?"Kelola semua produk":"Referensi produk"},null,8,["description"]),u?(o(),x(i(b),{key:0,href:"/products/create"},{default:n(()=>[c(i(y),{class:"bg-orange-500 hover:bg-orange-600"},{default:n(()=>[...e[2]||(e[2]=[m(" Tambah Produk ",-1)])]),_:1})]),_:1})):l("",!0)]),t("div",H,[t("div",J,[e[3]||(e[3]=t("label",{class:"text-sm font-medium"},"Cari Nama/SKU",-1)),N(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>p.value=s),onKeyup:U(K,["enter"]),type:"text",placeholder:"Ketik nama atau SKU...",class:"mt-2 w-full rounded-lg border border-input px-3 py-2 text-sm focus:border-orange-400 focus:ring-2 focus:ring-orange-200"},null,544),[[A,p.value]])]),t("div",L,[e[5]||(e[5]=t("label",{class:"text-sm font-medium"},"Kategori",-1)),N(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),class:"mt-2 w-full rounded-lg border border-input px-3 py-2 text-sm focus:border-orange-400 focus:ring-2 focus:ring-orange-200"},[e[4]||(e[4]=t("option",{value:""},"Semua Kategori",-1)),(o(!0),r(v,null,w(h.categories,s=>(o(),r("option",{key:s.id,value:s.id},a(s.name),9,G))),128))],512),[[B,f.value]])]),t("div",O,[c(i(y),{onClick:K,class:"bg-orange-500 hover:bg-orange-600"},{default:n(()=>[...e[6]||(e[6]=[m(" Cari ",-1)])]),_:1}),k.value?(o(),x(i(y),{key:0,onClick:_,variant:"outline"},{default:n(()=>[...e[7]||(e[7]=[m(" Reset ",-1)])]),_:1})):l("",!0)])]),k.value?(o(),r("div",Q,[t("p",W,[e[8]||(e[8]=m(" Ditemukan ",-1)),t("span",X,a(d.products.total),1),e[9]||(e[9]=m(" produk dari pencarian Anda ",-1)),t("button",{onClick:_,class:"ml-2 text-orange-600 underline hover:text-orange-800"}," Reset filter ")])])):l("",!0),t("div",Y,[t("div",Z,[t("table",ee,[t("thead",te,[t("tr",null,[e[10]||(e[10]=t("th",{class:"max-w-xs px-6 py-3 text-left text-sm font-semibold"}," Nama ",-1)),e[11]||(e[11]=t("th",{class:"px-6 py-3 text-left text-sm font-semibold"}," SKU ",-1)),e[12]||(e[12]=t("th",{class:"px-6 py-3 text-left text-sm font-semibold"}," Kategori ",-1)),e[13]||(e[13]=t("th",{class:"px-6 py-3 text-right text-sm font-semibold"}," Harga Jual ",-1)),u?(o(),r("th",se," Margin ")):l("",!0),e[14]||(e[14]=t("th",{class:"px-6 py-3 text-right text-sm font-semibold"}," Stok ",-1)),u?(o(),r("th",oe," Aksi ")):l("",!0)])]),t("tbody",null,[!d.products.data||d.products.data.length===0?(o(),r("tr",re,[t("td",{colspan:u?7:6,class:"py-8 text-center text-muted-foreground"},[t("div",le,[e[15]||(e[15]=t("p",null,"Tidak ada produk yang ditemukan",-1)),k.value?(o(),r("button",{key:0,onClick:_,class:"text-orange-600 underline hover:text-orange-800"}," Coba reset filter ")):l("",!0)])],8,ae)])):l("",!0),(o(!0),r(v,null,w(d.products.data,s=>(o(),r("tr",{key:s.id,class:"border-b hover:bg-muted/50"},[t("td",ie,a(s.name),1),t("td",ne,a(s.sku),1),t("td",de,a(s.category.name),1),t("td",ue,a(C(s.selling_price)),1),u?(o(),r("td",me,[c(i(j),{variant:s.selling_price-s.purchase_price>0?"default":"destructive"},{default:n(()=>[m(a(C(s.selling_price-s.purchase_price))+" / "+a(Math.round((s.selling_price-s.purchase_price)/s.selling_price*100))+"% ",1)]),_:2},1032,["variant"])])):l("",!0),t("td",ce,a(s.stock_quantity)+" "+a(s.unit),1),u?(o(),r("td",pe,[u?(o(),x(i(b),{key:0,href:`/products/${s.id}/edit`},{default:n(()=>[c(i(y),{variant:"outline",size:"sm"},{default:n(()=>[...e[16]||(e[16]=[m(" Edit ",-1)])]),_:1})]),_:1},8,["href"])):l("",!0),u?(o(),x(i(b),{key:1,href:`/products/${s.id}`,method:"delete",as:"button"},{default:n(()=>[c(i(y),{variant:"destructive",size:"sm",type:"button"},{default:n(()=>[...e[17]||(e[17]=[m(" Hapus ",-1)])]),_:1})]),_:1},8,["href"])):l("",!0)])):l("",!0)]))),128))])])])]),d.products.last_page>1?(o(),r("div",fe,[t("p",ge," Menampilkan "+a(d.products.from)+" hingga "+a(d.products.to)+" dari "+a(d.products.total)+" produk ",1),t("div",xe,[(o(!0),r(v,null,w(d.products.links,(s,P)=>(o(),x(i(b),{key:P,href:s.url||"#",only:["products"],disabled:!s.url,class:R(["rounded-lg px-3 py-2 text-sm font-medium transition-colors",s.active?"bg-orange-500 text-white":s.url?"border hover:bg-muted":"cursor-not-allowed border text-muted-foreground opacity-50"])},{default:n(()=>[m(a(s.label.includes("Previous")?"<":s.label.includes("Next")?">":s.label.replace(/[^\d.]/g,"").trim()||"..."),1)]),_:2},1032,["href","disabled","class"]))),128))])])):l("",!0)])]),_:1})],64))}});export{Ce as default};
