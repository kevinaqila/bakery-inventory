import{d as $,j as A,q as S,s as I,c as o,a as p,b as l,h as M,w as i,e as t,m as n,k as g,o as r,l as y,g as m,i as N,x as U,v as z,F as b,r as w,t as a,n as B,y as T,z as D}from"./app-BTzM3Bwa.js";import{_ as j}from"./HeadingSmall.vue_vue_type_script_setup_true_lang-DG106vjd.js";import{_ as F}from"./index-CXUZ_brs.js";import{_ as v}from"./AppLogo-BB5KigVj.js";import{_ as q}from"./AppLayout.vue_vue_type_script_setup_true_lang-CfA7DE_q.js";import"./utils-idn_OUc-.js";const E={class:"space-y-6 p-6"},H={class:"flex items-center justify-between"},L={class:"flex flex-wrap items-end gap-3"},J={class:"min-w-[200px] flex-1"},G={class:"min-w-[180px] flex-1"},O=["value"],Q={class:"flex gap-2"},W={key:0,class:"rounded-lg border-l-4 border-l-orange-500 bg-orange-50 p-4"},X={class:"text-sm text-orange-800"},Y={class:"font-semibold"},Z={class:"rounded-lg border bg-white"},ee={class:"overflow-x-auto"},te={class:"w-full"},se={class:"border-b bg-muted"},re={key:0,class:"px-6 py-3 text-right text-sm font-semibold"},ae={key:1,class:"px-6 py-3 text-right text-sm font-semibold"},oe={key:0},le=["colspan"],ie={class:"space-y-2"},ne={class:"max-w-xs truncate px-6 py-3 font-medium"},de={class:"px-6 py-3 text-sm text-muted-foreground"},ue={class:"px-6 py-3 text-sm"},me={class:"px-6 py-3 text-right"},ce={key:0,class:"px-6 py-3 text-right"},pe={class:"px-6 py-3 text-right font-semibold"},fe={class:"px-6 py-3 text-center"},xe={key:1,class:"space-x-2 px-6 py-3 text-right"},ge={key:1,class:"flex items-center justify-between"},ve={class:"text-sm text-muted-foreground"},ye={class:"flex gap-1"},Se=$({__name:"Index",props:{products:{},categories:{},filters:{}},setup(d){const c=A().props.auth.user.role==="admin",h=d,P=[{title:"Inventory",href:"#"},{title:"Produk",href:"/products"}],f=S(h.filters.search||""),x=S(h.filters.category_id||""),C=u=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(u),K=()=>{const u={};f.value&&(u.search=f.value),x.value&&(u.category_id=x.value),D.get("/products",u,{preserveState:!1})},_=()=>{f.value="",x.value="",D.get("/products",{},{preserveState:!1})},k=I(()=>f.value||x.value),R=u=>{if(!u)return"#";try{const e=new URL(u);return e.pathname+e.search}catch{return u}};return(u,e)=>(r(),o(b,null,[p(l(M),{title:"Produk"}),p(q,{breadcrumbs:P},{default:i(()=>[t("div",E,[t("div",H,[p(j,{title:"Daftar Produk",description:c?"Kelola semua produk":"Referensi produk"},null,8,["description"]),c?(r(),g(l(y),{key:0,href:"/products/create"},{default:i(()=>[p(l(v),{class:"bg-orange-500 hover:bg-orange-600"},{default:i(()=>[...e[2]||(e[2]=[m(" Tambah Produk ",-1)])]),_:1})]),_:1})):n("",!0)]),t("div",L,[t("div",J,[e[3]||(e[3]=t("label",{class:"text-sm font-medium"},"Cari Nama/SKU",-1)),N(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),onKeyup:U(K,["enter"]),type:"text",placeholder:"Ketik nama atau SKU...",class:"mt-2 w-full rounded-lg border border-input px-3 py-2 text-sm focus:border-orange-400 focus:ring-2 focus:ring-orange-200"},null,544),[[z,f.value]])]),t("div",G,[e[5]||(e[5]=t("label",{class:"text-sm font-medium"},"Kategori",-1)),N(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>x.value=s),class:"mt-2 w-full rounded-lg border border-input px-3 py-2 text-sm focus:border-orange-400 focus:ring-2 focus:ring-orange-200"},[e[4]||(e[4]=t("option",{value:""},"Semua Kategori",-1)),(r(!0),o(b,null,w(h.categories,s=>(r(),o("option",{key:s.id,value:s.id},a(s.name),9,O))),128))],512),[[B,x.value]])]),t("div",Q,[p(l(v),{onClick:K,class:"bg-orange-500 hover:bg-orange-600"},{default:i(()=>[...e[6]||(e[6]=[m(" Cari ",-1)])]),_:1}),k.value?(r(),g(l(v),{key:0,onClick:_,variant:"outline"},{default:i(()=>[...e[7]||(e[7]=[m(" Reset ",-1)])]),_:1})):n("",!0)])]),k.value?(r(),o("div",W,[t("p",X,[e[8]||(e[8]=m(" Ditemukan ",-1)),t("span",Y,a(d.products.total),1),e[9]||(e[9]=m(" produk dari pencarian Anda ",-1)),t("button",{onClick:_,class:"ml-2 text-orange-600 underline hover:text-orange-800"}," Reset filter ")])])):n("",!0),t("div",Z,[t("div",ee,[t("table",te,[t("thead",se,[t("tr",null,[e[10]||(e[10]=t("th",{class:"max-w-xs px-6 py-3 text-left text-sm font-semibold"}," Nama ",-1)),e[11]||(e[11]=t("th",{class:"px-6 py-3 text-left text-sm font-semibold"}," SKU ",-1)),e[12]||(e[12]=t("th",{class:"px-6 py-3 text-left text-sm font-semibold"}," Kategori ",-1)),e[13]||(e[13]=t("th",{class:"px-6 py-3 text-right text-sm font-semibold"}," Harga Jual ",-1)),c?(r(),o("th",re," Margin ")):n("",!0),e[14]||(e[14]=t("th",{class:"px-6 py-3 text-right text-sm font-semibold"}," Stok ",-1)),e[15]||(e[15]=t("th",{class:"px-6 py-3 text-center text-sm font-semibold"}," Status ",-1)),c?(r(),o("th",ae," Aksi ")):n("",!0)])]),t("tbody",null,[!d.products.data||d.products.data.length===0?(r(),o("tr",oe,[t("td",{colspan:c?7:6,class:"py-8 text-center text-muted-foreground"},[t("div",ie,[e[16]||(e[16]=t("p",null,"Tidak ada produk yang ditemukan",-1)),k.value?(r(),o("button",{key:0,onClick:_,class:"text-orange-600 underline hover:text-orange-800"}," Coba reset filter ")):n("",!0)])],8,le)])):n("",!0),(r(!0),o(b,null,w(d.products.data,s=>(r(),o("tr",{key:s.id,class:"border-b hover:bg-muted/50"},[t("td",ne,a(s.name),1),t("td",de,a(s.sku),1),t("td",ue,a(s.category.name),1),t("td",me,a(C(s.selling_price)),1),c?(r(),o("td",ce,[p(l(F),{variant:s.selling_price-s.purchase_price>0?"default":"destructive"},{default:i(()=>[m(a(C(s.selling_price-s.purchase_price))+" / "+a(Math.round((s.selling_price-s.purchase_price)/s.selling_price*100))+"% ",1)]),_:2},1032,["variant"])])):n("",!0),t("td",pe,a(s.stock_quantity)+" "+a(s.unit),1),t("td",fe,[p(l(F),{variant:s.is_active?"default":"destructive"},{default:i(()=>[m(a(s.is_active?"Aktif":"Nonaktif"),1)]),_:2},1032,["variant"])]),c?(r(),o("td",xe,[c?(r(),g(l(y),{key:0,href:`/products/${s.id}/edit`},{default:i(()=>[p(l(v),{variant:"outline",size:"sm"},{default:i(()=>[...e[17]||(e[17]=[m(" Edit ",-1)])]),_:1})]),_:1},8,["href"])):n("",!0),c?(r(),g(l(y),{key:1,href:`/products/${s.id}`,method:"delete",as:"button"},{default:i(()=>[p(l(v),{variant:"destructive",size:"sm",type:"button"},{default:i(()=>[...e[18]||(e[18]=[m(" Hapus ",-1)])]),_:1})]),_:1},8,["href"])):n("",!0)])):n("",!0)]))),128))])])])]),d.products.last_page>1?(r(),o("div",ge,[t("p",ve," Menampilkan "+a(d.products.from)+" hingga "+a(d.products.to)+" dari "+a(d.products.total)+" produk ",1),t("div",ye,[(r(!0),o(b,null,w(d.products.links,(s,V)=>(r(),g(l(y),{key:V,href:R(s.url),"preserve-scroll":"",disabled:!s.url,class:T(["rounded-lg px-3 py-2 text-sm font-medium transition-colors",s.active?"bg-orange-500 text-white":s.url?"border hover:bg-muted":"cursor-not-allowed border text-muted-foreground opacity-50"])},{default:i(()=>[m(a(s.label.includes("Previous")?"<":s.label.includes("Next")?">":s.label.replace(/[^\d.]/g,"").trim()||"..."),1)]),_:2},1032,["href","disabled","class"]))),128))])])):n("",!0)])]),_:1})],64))}});export{Se as default};
